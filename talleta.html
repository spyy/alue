<!DOCTYPE html>

<html lang="en" manifest="alueet.net.appcache">
<head>
<title>Talleta alue puhelimeen</title>
<meta charset="UTF-8">
<script>
    var area = getURLParam(window.location, "area");
    var from = getURLParam(window.location, "from");
    var to = getURLParam(window.location, "to");    

    if (typeof(Storage) !== "undefined") {
        if (to < from) {
            alert("Numeroon ei voi olla pienempi kuin numerosta.");
        } else {
            saveToLocalStorage(area, from, to);
        }
    } else {
        alert("Selaimesi ei tue tallennusta");
    }                        

    function getURLParam (oTarget, sVar) {            
        return decodeURI(oTarget.search.replace(new RegExp("^(?:.*[&\\?]" + encodeURI(sVar).replace(/[\.\+\*]/g, "\\$&") + "(?:\\=([^&]*))?)?.*$", "i"), "$1"));
    }
    
    function saveToLocalStorage(name, from, to) {            
        localStorage.setItem(name, from);
        localStorage.setItem(name + "_to", to);
            
        var i;
        for (i = from; i <= to; i++) {
            localStorage.setItem(name + "__" + i, "");                
        }
    }

    window.location.assign("alueet.html");
</script>
</head>
<body>

</body>
</html>